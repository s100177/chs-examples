# CHS-SDK é…ç½®è¿ç§»æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—å¸®åŠ©æ‚¨å°†ç°æœ‰çš„ä¼ ç»Ÿé…ç½®æ–‡ä»¶è¿ç§»åˆ°æ–°çš„é€šç”¨é…ç½®ç³»ç»Ÿã€‚é€šç”¨é…ç½®ç³»ç»Ÿæä¾›äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ã€æ›´å¥½çš„æ ‡å‡†åŒ–å’Œæ›´å¼ºçš„å¯æ‰©å±•æ€§ã€‚

## è¿ç§»ä¼˜åŠ¿

### ğŸš€ åŠŸèƒ½å¢å¼º
- **è°ƒè¯•åŠŸèƒ½**: é›†æˆæ•°æ®æ”¶é›†ã€Webä»ªè¡¨æ¿ã€æ§åˆ¶å°ç›‘æ§
- **æ€§èƒ½ç›‘æ§**: è‡ªåŠ¨è·Ÿè¸ªæ—¶é—´ã€å†…å­˜ã€CPUä½¿ç”¨æƒ…å†µ
- **å¯è§†åŒ–**: è‡ªåŠ¨ç”Ÿæˆå¤šç§ç±»å‹çš„å›¾è¡¨å’Œä»ªè¡¨æ¿
- **æ™ºèƒ½åˆ†æ**: æ§åˆ¶æ€§èƒ½åˆ†æã€ç»Ÿè®¡åˆ†æã€ç³»ç»Ÿè¯†åˆ«
- **æ—¥å¿—ç®¡ç†**: å¤šçº§åˆ«ã€å¤šå¤„ç†å™¨ã€ç»“æ„åŒ–æ—¥å¿—
- **é”™è¯¯å¤„ç†**: åˆ†ç±»å¤„ç†ã€æ¢å¤ç­–ç•¥ã€é€šçŸ¥æœºåˆ¶

### ğŸ“Š æ ‡å‡†åŒ–ç»“æ„
- ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶æ ¼å¼
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤
- å‘åå…¼å®¹ç°æœ‰é…ç½®
- æ”¯æŒå¤šç¯å¢ƒé…ç½®

### ğŸ”§ æ˜“äºä½¿ç”¨
- ç®€å•çš„APIæ¥å£
- ä¸°å¯Œçš„ç¤ºä¾‹å’Œæ–‡æ¡£
- è‡ªåŠ¨åŒ–é…ç½®éªŒè¯
- æ™ºèƒ½é»˜è®¤å€¼

## è¿ç§»æ­¥éª¤

### æ­¥éª¤1ï¼šäº†è§£ç°æœ‰é…ç½®

é¦–å…ˆåˆ†ææ‚¨ç°æœ‰çš„é…ç½®æ–‡ä»¶ç»“æ„ï¼š

```yaml
# ä¼ ç»Ÿé…ç½®ç¤ºä¾‹ (config.yml)
simulation:
  duration: 100.0
  time_step: 1.0
  output_interval: 5.0

debug:
  log_level: INFO
  enable_performance_monitoring: true

output:
  save_results: true
  plot_results: true
```

### æ­¥éª¤2ï¼šåˆ›å»ºé€šç”¨é…ç½®æ–‡ä»¶

åŸºäº `universal_config_template.yml` åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶ï¼š

```yaml
# æ–°çš„é€šç”¨é…ç½® (universal_config.yml)
simulation:
  name: "æ‚¨çš„ä»¿çœŸåç§°"
  description: "ä»¿çœŸæè¿°"
  time:
    end_time: 100.0      # å¯¹åº”åŸé…ç½®çš„ duration
    time_step: 1.0       # å¯¹åº”åŸé…ç½®çš„ time_step
    output_interval: 5.0 # å¯¹åº”åŸé…ç½®çš„ output_interval

debug:
  enabled: true
  log_level: "INFO"     # å¯¹åº”åŸé…ç½®
  data_collection:
    enabled: true       # å¯¹åº”åŸé…ç½®çš„ enable_performance_monitoring

visualization:
  enabled: true
  plots:
    enabled: true       # å¯¹åº”åŸé…ç½®çš„ plot_results

output:
  enabled: true
  save_history: true    # å¯¹åº”åŸé…ç½®çš„ save_results
```

### æ­¥éª¤3ï¼šæ›´æ–°è¿è¡Œè„šæœ¬

å°†åŸæœ‰çš„è¿è¡Œè„šæœ¬æ›´æ–°ä¸ºä½¿ç”¨æ–°çš„é…ç½®ç³»ç»Ÿï¼š

```python
# åŸæœ‰æ–¹å¼
from core_lib.io.yaml_loader import SimulationBuilder

builder = SimulationBuilder(scenario_path="path/to/scenario")
simulation = builder.build_simulation()
results = simulation.run()

# æ–°çš„æ–¹å¼
from core_lib.config.enhanced_yaml_loader import load_universal_config

builder = load_universal_config(
    config_file="universal_config.yml",
    scenario_path="path/to/scenario"
)
results = builder.run_enhanced_simulation()
```

### æ­¥éª¤4ï¼šéªŒè¯è¿ç§»ç»“æœ

è¿è¡Œæµ‹è¯•ç¡®ä¿è¿ç§»æˆåŠŸï¼š

```bash
python run_universal_config.py
```

## é…ç½®æ˜ å°„è¡¨

### åŸºç¡€ä»¿çœŸé…ç½®

| åŸé…ç½® | æ–°é…ç½® | è¯´æ˜ |
|--------|--------|------|
| `simulation.duration` | `simulation.time.end_time` | ä»¿çœŸæŒç»­æ—¶é—´ |
| `simulation.dt` | `simulation.time.time_step` | æ—¶é—´æ­¥é•¿ |
| `simulation.output_interval` | `simulation.time.output_interval` | è¾“å‡ºé—´éš” |

### è°ƒè¯•é…ç½®

| åŸé…ç½® | æ–°é…ç½® | è¯´æ˜ |
|--------|--------|------|
| `debug.log_level` | `debug.log_level` | æ—¥å¿—çº§åˆ« |
| `debug.log_file` | `debug.log_file` | æ—¥å¿—æ–‡ä»¶ |
| `debug.enable_performance_monitoring` | `performance.enabled` | æ€§èƒ½ç›‘æ§ |
| `debug.enable_data_collection` | `debug.data_collection.enabled` | æ•°æ®æ”¶é›† |
| `debug.data_collection_interval` | `debug.data_collection.interval` | æ”¶é›†é—´éš” |
| `debug.session_id` | `debug.session_id` | ä¼šè¯ID |

### è¾“å‡ºé…ç½®

| åŸé…ç½® | æ–°é…ç½® | è¯´æ˜ |
|--------|--------|------|
| `output.save_results` | `output.save_history` | ä¿å­˜ç»“æœ |
| `output.output_directory` | `output.output_directory` | è¾“å‡ºç›®å½• |
| `output.plot_results` | `visualization.plots.enabled` | ç”Ÿæˆå›¾è¡¨ |
| `output.save_plots` | `visualization.plots.save_plots` | ä¿å­˜å›¾è¡¨ |
| `output.variables_to_plot` | `visualization.plots.charts[].variables` | ç»˜å›¾å˜é‡ |

### éªŒè¯é…ç½®

| åŸé…ç½® | æ–°é…ç½® | è¯´æ˜ |
|--------|--------|------|
| `validation.enable` | `output.validation.enabled` | å¯ç”¨éªŒè¯ |
| `validation.expected_results` | `output.validation.expected_results` | æœŸæœ›ç»“æœ |
| `validation.tolerance` | `output.validation.tolerance` | å®¹å·® |

## ç¤ºä¾‹è¿ç§»

### Example 1: åŸºç¡€ç‰©ç†ä»¿çœŸ

**åŸé…ç½®æ–‡ä»¶**: `mission/example_1/config.yml`
**æ–°é…ç½®æ–‡ä»¶**: `mission/example_1/universal_config.yml`
**è¿è¡Œè„šæœ¬**: `mission/example_1/run_universal_config.py`

ä¸»è¦æ”¹è¿›ï¼š
- å¢åŠ äº†è¯¦ç»†çš„è°ƒè¯•å’Œç›‘æ§åŠŸèƒ½
- è‡ªåŠ¨ç”Ÿæˆå¤šç§ç±»å‹çš„å›¾è¡¨
- é›†æˆæ€§èƒ½åˆ†æå’ŒæŠ¥å‘Šç”Ÿæˆ
- æ”¯æŒå®æ—¶å¯è§†åŒ–

### Example 2: é—­ç¯æ§åˆ¶ç³»ç»Ÿ

**åŸé…ç½®æ–‡ä»¶**: `mission/example_2/config_2_1.yml`
**æ–°é…ç½®æ–‡ä»¶**: `mission/example_2/universal_config.yml`

ä¸»è¦æ”¹è¿›ï¼š
- å¢åŠ äº†æ§åˆ¶æ€§èƒ½åˆ†æ
- æ”¯æŒå®æ—¶æ§åˆ¶ä»ªè¡¨æ¿
- é›†æˆç³»ç»Ÿè¯†åˆ«åŠŸèƒ½
- å¢å¼ºçš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
- ä¸“é—¨çš„æ§åˆ¶ç³»ç»Ÿæ—¥å¿—

## è¿ç§»æ£€æŸ¥æ¸…å•

### âœ… è¿ç§»å‰å‡†å¤‡
- [ ] å¤‡ä»½ç°æœ‰é…ç½®æ–‡ä»¶
- [ ] äº†è§£ç°æœ‰é…ç½®çš„åŠŸèƒ½éœ€æ±‚
- [ ] ç¡®å®šéœ€è¦å¯ç”¨çš„æ–°åŠŸèƒ½
- [ ] å‡†å¤‡æµ‹è¯•æ•°æ®å’ŒéªŒè¯æ ‡å‡†

### âœ… é…ç½®æ–‡ä»¶è¿ç§»
- [ ] åˆ›å»ºæ–°çš„é€šç”¨é…ç½®æ–‡ä»¶
- [ ] æ˜ å°„æ‰€æœ‰ç°æœ‰é…ç½®é¡¹
- [ ] é…ç½®æ–°å¢çš„åŠŸèƒ½æ¨¡å—
- [ ] è®¾ç½®åˆé€‚çš„æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºæ ¼å¼
- [ ] é…ç½®å¯è§†åŒ–å’Œåˆ†æåŠŸèƒ½

### âœ… ä»£ç æ›´æ–°
- [ ] æ›´æ–°å¯¼å…¥è¯­å¥
- [ ] ä¿®æ”¹é…ç½®åŠ è½½æ–¹å¼
- [ ] æ›´æ–°è¿è¡Œè„šæœ¬
- [ ] æ·»åŠ é”™è¯¯å¤„ç†

### âœ… æµ‹è¯•éªŒè¯
- [ ] è¿è¡ŒåŸºç¡€åŠŸèƒ½æµ‹è¯•
- [ ] éªŒè¯è¾“å‡ºç»“æœä¸€è‡´æ€§
- [ ] æµ‹è¯•æ–°å¢åŠŸèƒ½
- [ ] æ£€æŸ¥æ—¥å¿—å’ŒæŠ¥å‘Šç”Ÿæˆ
- [ ] æ€§èƒ½å¯¹æ¯”æµ‹è¯•

### âœ… æ–‡æ¡£æ›´æ–°
- [ ] æ›´æ–°READMEæ–‡ä»¶
- [ ] æ·»åŠ é…ç½®è¯´æ˜
- [ ] æ›´æ–°ä½¿ç”¨ç¤ºä¾‹
- [ ] è®°å½•è¿ç§»è¿‡ç¨‹å’Œæ³¨æ„äº‹é¡¹

## å¸¸è§é—®é¢˜

### Q1: è¿ç§»åæ€§èƒ½æ˜¯å¦ä¼šå—å½±å“ï¼Ÿ

**A**: é€šç”¨é…ç½®ç³»ç»Ÿç»è¿‡ä¼˜åŒ–ï¼Œæ€§èƒ½å½±å“å¾ˆå°ã€‚æ–°å¢çš„ç›‘æ§å’Œåˆ†æåŠŸèƒ½å¯ä»¥æŒ‰éœ€å¯ç”¨ï¼Œä¸ä¼šæ˜¾è‘—å½±å“ä»¿çœŸæ€§èƒ½ã€‚

### Q2: æ˜¯å¦éœ€è¦ä¿®æ”¹ç°æœ‰çš„ç»„ä»¶å’Œæ™ºèƒ½ä½“ä»£ç ï¼Ÿ

**A**: ä¸éœ€è¦ã€‚é€šç”¨é…ç½®ç³»ç»Ÿä¸ç°æœ‰çš„ç»„ä»¶å’Œæ™ºèƒ½ä½“å®Œå…¨å…¼å®¹ï¼Œåªéœ€è¦æ›´æ–°é…ç½®æ–‡ä»¶å’Œè¿è¡Œè„šæœ¬ã€‚

### Q3: å¦‚ä½•å¤„ç†è‡ªå®šä¹‰é…ç½®é¡¹ï¼Ÿ

**A**: å¯ä»¥åœ¨é€šç”¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰é…ç½®èŠ‚ï¼Œæˆ–è€…ä½¿ç”¨ `environment.variables.custom_vars` æ¥å®šä¹‰è‡ªå®šä¹‰å˜é‡ã€‚

### Q4: è¿ç§»åå¦‚ä½•è°ƒè¯•é—®é¢˜ï¼Ÿ

**A**: æ–°ç³»ç»Ÿæä¾›äº†æ›´å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ï¼š
- å¯ç”¨ `debug.dashboard.web_dashboard` è·å¾—å®æ—¶ç›‘æ§
- æŸ¥çœ‹è¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶
- ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„åˆ†ææŠ¥å‘Š
- åˆ©ç”¨æ€§èƒ½ç›‘æ§åŠŸèƒ½å®šä½ç“¶é¢ˆ

### Q5: æ˜¯å¦å¯ä»¥é€æ­¥è¿ç§»ï¼Ÿ

**A**: æ˜¯çš„ã€‚æ‚¨å¯ä»¥ï¼š
1. å…ˆåˆ›å»ºé€šç”¨é…ç½®æ–‡ä»¶ï¼Œä¿ç•™åŸæœ‰è¿è¡Œæ–¹å¼
2. é€æ­¥å¯ç”¨æ–°åŠŸèƒ½è¿›è¡Œæµ‹è¯•
3. æœ€åå®Œå…¨åˆ‡æ¢åˆ°æ–°çš„è¿è¡Œæ–¹å¼

## æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. **æŸ¥çœ‹ç¤ºä¾‹**: å‚è€ƒ `mission/example_1` å’Œ `mission/example_2` ä¸­çš„è¿ç§»ç¤ºä¾‹
2. **é˜…è¯»æ–‡æ¡£**: æŸ¥çœ‹ `core_lib/config/README.md` è·å–è¯¦ç»†è¯´æ˜
3. **è¿è¡Œæµ‹è¯•**: ä½¿ç”¨ `test_universal_config.py` éªŒè¯ç³»ç»ŸåŠŸèƒ½
4. **æŸ¥çœ‹æ—¥å¿—**: å¯ç”¨è¯¦ç»†æ—¥å¿—è·å–è°ƒè¯•ä¿¡æ¯

## æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†
- ä¸ºä¸åŒç¯å¢ƒåˆ›å»ºä¸åŒçš„é…ç½®æ–‡ä»¶
- ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†é…ç½®æ–‡ä»¶
- å®šæœŸå¤‡ä»½é‡è¦é…ç½®

### 2. åŠŸèƒ½ä½¿ç”¨
- å¼€å‘é˜¶æ®µå¯ç”¨è¯¦ç»†è°ƒè¯•å’Œç›‘æ§
- ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–æ€§èƒ½è®¾ç½®
- æ ¹æ®éœ€è¦é€‰æ‹©æ€§å¯ç”¨åŠŸèƒ½æ¨¡å—

### 3. ç›‘æ§å’Œåˆ†æ
- å®šæœŸæŸ¥çœ‹æ€§èƒ½æŠ¥å‘Š
- åˆ©ç”¨å¯è§†åŒ–åŠŸèƒ½åˆ†æç»“æœ
- è®¾ç½®åˆé€‚çš„é”™è¯¯å¤„ç†ç­–ç•¥

### 4. æ–‡æ¡£ç»´æŠ¤
- è®°å½•é…ç½®å˜æ›´å†å²
- ç»´æŠ¤é…ç½®è¯´æ˜æ–‡æ¡£
- åˆ†äº«æœ€ä½³å®è·µç»éªŒ

---

é€šè¿‡éµå¾ªæœ¬è¿ç§»æŒ‡å—ï¼Œæ‚¨å¯ä»¥é¡ºåˆ©åœ°å°†ç°æœ‰é¡¹ç›®è¿ç§»åˆ°æ–°çš„é€šç”¨é…ç½®ç³»ç»Ÿï¼Œå¹¶äº«å—æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚