# 节点故障扰动场景配置
# 模拟分布式系统中的智能体节点故障

disturbance_scenario:
  name: "Node_Failure_Disturbance"
  description: "模拟分布式智能体节点的故障和恢复"
  type: "node_failure"
  category: "system_failure"
  
  # 扰动参数配置
  parameters:
    # 故障类型配置
    failure_types:
      partial_failure:
        description: "部分功能失效"
        performance_degradation: 0.5  # 性能降级到50%
        response_delay: 2.0           # 响应延迟倍数
        error_rate: 0.1               # 错误率10%
      complete_failure:
        description: "完全失效"
        performance_degradation: 0.0  # 性能降级到0%
        response_delay: null          # 无响应
        error_rate: 1.0               # 错误率100%
      intermittent_failure:
        description: "间歇性故障"
        failure_probability: 0.3      # 30%概率故障
        failure_duration: 60          # 故障持续60秒
        recovery_duration: 120        # 恢复持续120秒
    
    # 故障节点配置
    failure_scenarios:
      - node_id: "Channel1_Twin_Agent"
        failure_type: "partial_failure"
        start_time: 7200              # 2小时后开始
        duration: 1800                # 持续30分钟
        recovery_time: 300            # 恢复时间5分钟
        
      - node_id: "Gate2_Perception_Agent"
        failure_type: "complete_failure"
        start_time: 10800             # 3小时后开始
        duration: 900                 # 持续15分钟
        recovery_time: 180            # 恢复时间3分钟
        
      - node_id: "CentralPerceptionAgent"
        failure_type: "intermittent_failure"
        start_time: 14400             # 4小时后开始
        duration: 3600                # 持续1小时
        
      - node_id: "Gate3_Control_Agent"
        failure_type: "partial_failure"
        start_time: 18000             # 5小时后开始
        duration: 1200                # 持续20分钟
        recovery_time: 240            # 恢复时间4分钟
  
  # 故障检测配置
  failure_detection:
    enable: true
    detection_methods:
      - "heartbeat_monitoring"       # 心跳监测
      - "response_time_analysis"     # 响应时间分析
      - "data_quality_check"         # 数据质量检查
    detection_threshold:
      heartbeat_timeout: 30           # 心跳超时30秒
      response_time_limit: 10         # 响应时间限制10秒
      data_quality_threshold: 0.8     # 数据质量阈值80%
    
  # 故障恢复策略
  recovery_strategy:
    enable_redundancy: true
    backup_nodes:
      - primary: "Channel1_Twin_Agent"
        backup: "Channel1_Backup_Agent"
      - primary: "CentralPerceptionAgent"
        backup: "Backup_Central_Agent"
    
    failover_mechanism:
      automatic_failover: true
      failover_timeout: 60            # 故障转移超时60秒
      health_check_interval: 30       # 健康检查间隔30秒
    
    recovery_procedures:
      - "restart_failed_node"
      - "restore_data_consistency"
      - "reestablish_connections"
      - "validate_system_state"
  
  # 性能指标监测
  monitoring:
    metrics:
      - "node_availability"
      - "system_reliability"
      - "failover_time"
      - "recovery_time"
      - "data_consistency"
    sampling_interval: 15            # 采样间隔15秒
    
  # 预期影响评估
  expected_impact:
    severity: "critical"
    affected_components:
      - "分布式感知层"
      - "控制智能体层"
      - "系统可靠性"
      - "数据一致性"
    impact_description: "节点故障将导致系统功能缺失，影响整体系统可靠性和控制连续性"
    
  # 风险评估
  risk_assessment:
    probability: "medium"            # 发生概率
    impact_level: "high"             # 影响程度
    mitigation_priority: "high"      # 缓解优先级
    business_continuity_impact: "significant"  # 业务连续性影响