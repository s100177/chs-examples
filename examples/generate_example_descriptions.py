#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
è‡ªç„¶è¯­è¨€å¤„ç†ç¤ºä¾‹è„šæœ¬

è¿™ä¸ªè„šæœ¬æ¼”ç¤ºäº†CHS-SDKçš„è‡ªç„¶è¯­è¨€å¤„ç†åŠŸèƒ½ï¼š
1. é…ç½®æ–‡ä»¶åˆ°è‡ªç„¶è¯­è¨€çš„è½¬æ¢
2. è‡ªç„¶è¯­è¨€åˆ°é…ç½®æ–‡ä»¶çš„è½¬æ¢
3. æ”¯æŒæ‰€æœ‰å››ç§é…ç½®æ–‡ä»¶ç±»å‹

ä½œè€…: CHS-SDK Team
ç‰ˆæœ¬: 1.0.0
åˆ›å»ºæ—¶é—´: 2024
"""

import os
import sys
from pathlib import Path

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°è·¯å¾„
project_root = Path(__file__).parent.parent
sys.path.insert(0, str(project_root))

from core_lib.nlp.config_to_language_converter import ConfigToLanguageConverter
from core_lib.nlp.language_to_config_converter import LanguageToConfigConverter
from core_lib.config.unified_config_manager import ConfigType

def demo_config_to_language():
    """æ¼”ç¤ºé…ç½®æ–‡ä»¶åˆ°è‡ªç„¶è¯­è¨€çš„è½¬æ¢"""
    print("=" * 60)
    print("é…ç½®æ–‡ä»¶åˆ°è‡ªç„¶è¯­è¨€è½¬æ¢æ¼”ç¤º")
    print("=" * 60)
    
    converter = ConfigToLanguageConverter()
    
    # ç¤ºä¾‹é…ç½®æ–‡ä»¶è·¯å¾„
    example_configs = [
        "examples/watertank/base/config.yml",
        "examples/demo/unified_config.yml",
        "config/universal_config.yml"
    ]
    
    for config_path in example_configs:
        if os.path.exists(config_path):
            print(f"\nå¤„ç†é…ç½®æ–‡ä»¶: {config_path}")
            print("-" * 40)
            
            try:
                # è½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€
                description = converter.convert_config_to_language(config_path)
                
                # æ˜¾ç¤ºéƒ¨åˆ†ç»“æœ
                print(f"é…ç½®ç±»å‹: {description.config_type}")
                print(f"ä»¿çœŸåç§°: {description.simulation_name}")
                print(f"å»ºæ¨¡æè¿°: {description.modeling_description[:200]}...")
                print(f"æƒ…æ™¯æè¿°: {description.scenario_description[:200]}...")
                
                # ä¿å­˜å®Œæ•´æè¿°
                output_file = f"reports/generated_description_{Path(config_path).stem}.md"
                converter.save_description_to_file(description, output_file)
                print(f"å®Œæ•´æè¿°å·²ä¿å­˜åˆ°: {output_file}")
                
            except Exception as e:
                print(f"è½¬æ¢å¤±è´¥: {e}")
        else:
            print(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_path}")

def demo_language_to_config():
    """æ¼”ç¤ºè‡ªç„¶è¯­è¨€åˆ°é…ç½®æ–‡ä»¶çš„è½¬æ¢"""
    print("\n" + "=" * 60)
    print("è‡ªç„¶è¯­è¨€åˆ°é…ç½®æ–‡ä»¶è½¬æ¢æ¼”ç¤º")
    print("=" * 60)
    
    converter = LanguageToConfigConverter()
    
    # ç¤ºä¾‹è‡ªç„¶è¯­è¨€æè¿°
    example_descriptions = [
        {
            "name": "ç®€å•æ°´åº“ç³»ç»Ÿ",
            "description": """
ä»¿çœŸåç§°ï¼šç®€å•æ°´åº“æ§åˆ¶ç³»ç»Ÿ
ä»¿çœŸæ—¶é•¿ï¼š3600ç§’
æ—¶é—´æ­¥é•¿ï¼š1.0ç§’

ç³»ç»Ÿç»„ä»¶ï¼š
- æ°´åº“1ï¼šæ°´åº“ï¼Œå®¹é‡1000ç«‹æ–¹ç±³ï¼Œåˆå§‹æ°´ä½5ç±³
- é—¸é—¨1ï¼šé—¸é—¨ï¼Œæœ€å¤§æµé‡50ç«‹æ–¹ç±³æ¯ç§’
- ä¼ æ„Ÿå™¨1ï¼šä¼ æ„Ÿå™¨ï¼Œç›‘æµ‹æ°´ä½

ç³»ç»Ÿè¿æ¥ï¼š
- æ°´åº“1è¿æ¥é—¸é—¨1

æ§åˆ¶ç­–ç•¥ï¼š
- é‡‡ç”¨PIDæ§åˆ¶ç­–ç•¥æ§åˆ¶é—¸é—¨å¼€åº¦
- ç›®æ ‡æ°´ä½ï¼š5ç±³

åˆ†æè¦æ±‚ï¼š
- è¿›è¡Œæ§åˆ¶æ€§èƒ½åˆ†æ
- ç”Ÿæˆæ°´ä½å˜åŒ–å›¾è¡¨
            """
        },
        {
            "name": "å¤šç»„ä»¶æ°´åˆ©ç³»ç»Ÿ",
            "description": """
ä»¿çœŸåç§°ï¼šå¤æ‚æ°´åˆ©è°ƒåº¦ç³»ç»Ÿ
ä»¿çœŸæ—¶é•¿ï¼š7200ç§’
æ—¶é—´æ­¥é•¿ï¼š0.5ç§’

ç³»ç»Ÿç»Ÿè®¡ï¼š
- æ°´åº“ï¼š2ä¸ª
- é—¸é—¨ï¼š3ä¸ª
- æ°´æ³µï¼š1ä¸ª
- ä¼ æ„Ÿå™¨ï¼š4ä¸ª

æ§åˆ¶ç­–ç•¥ï¼š
- é‡‡ç”¨æ¨¡å‹é¢„æµ‹æ§åˆ¶
- ä¼˜åŒ–ç›®æ ‡ï¼šæœ€å°åŒ–èƒ½è€—
- çº¦æŸæ¡ä»¶ï¼šæ°´ä½åœ¨å®‰å…¨èŒƒå›´å†…

åˆ†æè¦æ±‚ï¼š
- ç³»ç»Ÿè¾¨è¯†åˆ†æ
- ä¼˜åŒ–æ€§èƒ½è¯„ä¼°
- ç»Ÿè®¡åˆ†ææŠ¥å‘Š
            """
        }
    ]
    
    # æµ‹è¯•ä¸åŒçš„é…ç½®ç±»å‹
    config_types = [
        (ConfigType.UNIFIED_SINGLE, "unified"),
        (ConfigType.UNIVERSAL_CONFIG, "universal"),
        (ConfigType.TRADITIONAL_MULTI, "traditional"),
        (ConfigType.HARDCODED, "hardcoded")
    ]
    
    for desc_info in example_descriptions:
        print(f"\nå¤„ç†æè¿°: {desc_info['name']}")
        print("-" * 40)
        
        for config_type, type_name in config_types:
            try:
                output_dir = f"examples/converted/{desc_info['name'].replace(' ', '_')}_{type_name}"
                
                # è½¬æ¢ä¸ºé…ç½®æ–‡ä»¶
                config_data = converter.convert_language_to_config(
                    desc_info['description'],
                    config_type,
                    output_dir
                )
                
                print(f"  {type_name} é…ç½®å·²ç”Ÿæˆåˆ°: {output_dir}")
                
            except Exception as e:
                print(f"  {type_name} é…ç½®ç”Ÿæˆå¤±è´¥: {e}")

def demo_round_trip_conversion():
    """æ¼”ç¤ºå¾€è¿”è½¬æ¢ï¼ˆé…ç½®->è‡ªç„¶è¯­è¨€->é…ç½®ï¼‰"""
    print("\n" + "=" * 60)
    print("å¾€è¿”è½¬æ¢æ¼”ç¤ºï¼ˆé…ç½®->è‡ªç„¶è¯­è¨€->é…ç½®ï¼‰")
    print("=" * 60)
    
    config_converter = ConfigToLanguageConverter()
    language_converter = LanguageToConfigConverter()
    
    # é€‰æ‹©ä¸€ä¸ªç¤ºä¾‹é…ç½®æ–‡ä»¶
    original_config = "examples/watertank/base/config.yml"
    
    if os.path.exists(original_config):
        print(f"åŸå§‹é…ç½®æ–‡ä»¶: {original_config}")
        
        try:
            # ç¬¬ä¸€æ­¥ï¼šé…ç½®æ–‡ä»¶ -> è‡ªç„¶è¯­è¨€
            print("\nç¬¬ä¸€æ­¥ï¼šé…ç½®æ–‡ä»¶è½¬æ¢ä¸ºè‡ªç„¶è¯­è¨€...")
            description = config_converter.convert_config_to_language(original_config)
            
            # ä¿å­˜è‡ªç„¶è¯­è¨€æè¿°
            nl_file = "examples/converted/round_trip_description.md"
            config_converter.save_description_to_file(description, nl_file)
            print(f"è‡ªç„¶è¯­è¨€æè¿°å·²ä¿å­˜åˆ°: {nl_file}")
            
            # ç¬¬äºŒæ­¥ï¼šè‡ªç„¶è¯­è¨€ -> é…ç½®æ–‡ä»¶
            print("\nç¬¬äºŒæ­¥ï¼šè‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºé…ç½®æ–‡ä»¶...")
            
            # ç»„åˆå®Œæ•´çš„æè¿°æ–‡æœ¬
            full_description = f"""
{description.modeling_description}

{description.scenario_description}

{description.query_description}

{description.analysis_description}
            """
            
            # ç”Ÿæˆæ–°çš„é…ç½®æ–‡ä»¶
            new_config_data = language_converter.convert_language_to_config(
                full_description,
                ConfigType.UNIFIED_SINGLE,
                "examples/converted/round_trip_config"
            )
            
            print("å¾€è¿”è½¬æ¢å®Œæˆï¼")
            print("åŸå§‹é…ç½® -> è‡ªç„¶è¯­è¨€ -> æ–°é…ç½®")
            print("å¯ä»¥æ¯”è¾ƒåŸå§‹é…ç½®å’Œæ–°ç”Ÿæˆçš„é…ç½®æ–‡ä»¶")
            
        except Exception as e:
            print(f"å¾€è¿”è½¬æ¢å¤±è´¥: {e}")
            import traceback
            traceback.print_exc()
    else:
        print(f"åŸå§‹é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {original_config}")

def create_sample_descriptions():
    """åˆ›å»ºç¤ºä¾‹è‡ªç„¶è¯­è¨€æè¿°æ–‡ä»¶"""
    print("\n" + "=" * 60)
    print("åˆ›å»ºç¤ºä¾‹è‡ªç„¶è¯­è¨€æè¿°æ–‡ä»¶")
    print("=" * 60)
    
    # ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨
    output_dir = Path("examples/converted/sample_descriptions")
    output_dir.mkdir(parents=True, exist_ok=True)
    
    # ç¤ºä¾‹æè¿°
    samples = {
        "æ°´åº“è°ƒåº¦ç³»ç»Ÿ.txt": """
ä»¿çœŸåç§°ï¼šæ°´åº“è°ƒåº¦æ§åˆ¶ç³»ç»Ÿ
ä»¿çœŸæè¿°ï¼šæ¨¡æ‹Ÿæ°´åº“åœ¨ä¸åŒå…¥æµæ¡ä»¶ä¸‹çš„è°ƒåº¦æ§åˆ¶è¿‡ç¨‹
ä»¿çœŸæ—¶é•¿ï¼š86400ç§’ï¼ˆ24å°æ—¶ï¼‰
æ—¶é—´æ­¥é•¿ï¼š60ç§’
æ±‚è§£å™¨ï¼šrk4

ç³»ç»Ÿç»„ä»¶ï¼š
- ä¸»æ°´åº“ï¼šæ°´åº“ï¼Œå®¹é‡5000000ç«‹æ–¹ç±³ï¼Œåˆå§‹æ°´ä½120ç±³ï¼Œæœ€å¤§æ°´ä½130ç±³ï¼Œæœ€å°æ°´ä½100ç±³
- æ³„æ´ªé—¸ï¼šé—¸é—¨ï¼Œæœ€å¤§æµé‡1000ç«‹æ–¹ç±³æ¯ç§’ï¼Œåˆå§‹å¼€åº¦0%
- å‘ç”µæœºç»„ï¼šæ°´è½®æœºï¼Œé¢å®šåŠŸç‡50000åƒç“¦ï¼Œæ•ˆç‡0.9
- æ°´ä½ä¼ æ„Ÿå™¨ï¼šä¼ æ„Ÿå™¨ï¼Œæµ‹é‡èŒƒå›´90-140ç±³ï¼Œç²¾åº¦0.01ç±³
- æµé‡ä¼ æ„Ÿå™¨ï¼šä¼ æ„Ÿå™¨ï¼Œæµ‹é‡èŒƒå›´0-1200ç«‹æ–¹ç±³æ¯ç§’ï¼Œç²¾åº¦0.1ç«‹æ–¹ç±³æ¯ç§’

ç³»ç»Ÿè¿æ¥ï¼š
- ä¸»æ°´åº“è¿æ¥æ³„æ´ªé—¸
- ä¸»æ°´åº“è¿æ¥å‘ç”µæœºç»„
- æ°´ä½ä¼ æ„Ÿå™¨ç›‘æµ‹ä¸»æ°´åº“
- æµé‡ä¼ æ„Ÿå™¨ç›‘æµ‹æ³„æ´ªé—¸å‡ºå£

æ§åˆ¶ç­–ç•¥ï¼š
- é‡‡ç”¨æ¨¡å‹é¢„æµ‹æ§åˆ¶ç­–ç•¥
- æ§åˆ¶ç›®æ ‡ï¼šç»´æŒæ°´ä½åœ¨å®‰å…¨èŒƒå›´å†…ï¼ŒåŒæ—¶æœ€å¤§åŒ–å‘ç”µæ•ˆç›Š
- é¢„æµ‹æ—¶åŸŸï¼š3600ç§’
- æ§åˆ¶æ—¶åŸŸï¼š600ç§’

ä¼˜åŒ–ç›®æ ‡ï¼š
- æœ€å¤§åŒ–å‘ç”µé‡
- æœ€å°åŒ–å¼ƒæ°´é‡
- ç¡®ä¿é˜²æ´ªå®‰å…¨

åˆ†æè¦æ±‚ï¼š
- æ§åˆ¶æ€§èƒ½åˆ†æï¼šè¯„ä¼°æ°´ä½æ§åˆ¶ç²¾åº¦å’Œå“åº”æ—¶é—´
- ç»æµæ•ˆç›Šåˆ†æï¼šè®¡ç®—å‘ç”µæ”¶ç›Šå’Œè¿è¡Œæˆæœ¬
- å®‰å…¨æ€§åˆ†æï¼šè¯„ä¼°æç«¯å·¥å†µä¸‹çš„ç³»ç»Ÿå“åº”
- ç”Ÿæˆå®æ—¶ç›‘æ§å›¾è¡¨å’Œå†å²è¶‹åŠ¿åˆ†æ
        """,
        
        "çŒåŒºé…æ°´ç³»ç»Ÿ.txt": """
ä»¿çœŸåç§°ï¼šæ™ºèƒ½çŒåŒºé…æ°´ç³»ç»Ÿ
ä»¿çœŸæè¿°ï¼šæ¨¡æ‹Ÿå¤§å‹çŒåŒºçš„æ™ºèƒ½åŒ–é…æ°´è°ƒåº¦è¿‡ç¨‹
ä»¿çœŸæ—¶é•¿ï¼š604800ç§’ï¼ˆ7å¤©ï¼‰
æ—¶é—´æ­¥é•¿ï¼š300ç§’
æ±‚è§£å™¨ï¼šadams

ç³»ç»Ÿç»Ÿè®¡ï¼š
- å¹²æ¸ ï¼š1æ¡
- æ”¯æ¸ ï¼š5æ¡
- æ–—æ¸ ï¼š20æ¡
- é—¸é—¨ï¼š30ä¸ª
- æ°´æ³µï¼š8å°
- ä¼ æ„Ÿå™¨ï¼š50ä¸ª

ä¸»è¦ç»„ä»¶ï¼š
- æ€»å¹²æ¸ ï¼šæ¸ é“ï¼Œé•¿åº¦50å…¬é‡Œï¼Œè®¾è®¡æµé‡100ç«‹æ–¹ç±³æ¯ç§’
- åˆ†æ°´é—¸ç¾¤ï¼šé—¸é—¨ç»„ï¼ŒåŒ…å«5ä¸ªä¸»è¦åˆ†æ°´é—¸
- ææ°´æ³µç«™ï¼šæ³µç«™ï¼Œæ€»è£…æœºå®¹é‡2000åƒç“¦
- ç›‘æµ‹ç½‘ç»œï¼šä¼ æ„Ÿå™¨ç½‘ç»œï¼Œå®æ—¶ç›‘æµ‹å„èŠ‚ç‚¹æ°´ä½å’Œæµé‡

æ§åˆ¶ç­–ç•¥ï¼š
- é‡‡ç”¨åˆ†å±‚é€’é˜¶æ§åˆ¶
- ä¸Šå±‚ï¼šå…¨å±€ä¼˜åŒ–è°ƒåº¦
- ä¸­å±‚ï¼šåŒºåŸŸåè°ƒæ§åˆ¶
- ä¸‹å±‚ï¼šå±€éƒ¨åé¦ˆæ§åˆ¶

ä¼˜åŒ–ç›®æ ‡ï¼š
- æ»¡è¶³å„çŒåŒºç”¨æ°´éœ€æ±‚
- æœ€å°åŒ–è¾“æ°´æŸå¤±
- æœ€å°åŒ–èƒ½è€—
- ä¿è¯ä¾›æ°´å…¬å¹³æ€§

æ™ºèƒ½åŒ–åŠŸèƒ½ï¼š
- éœ€æ°´é‡é¢„æµ‹
- è‡ªé€‚åº”è°ƒåº¦
- æ•…éšœè¯Šæ–­
- è¿œç¨‹ç›‘æ§

åˆ†æè¦æ±‚ï¼š
- ä¾›æ°´æ•ˆç‡åˆ†æ
- èƒ½è€—ä¼˜åŒ–åˆ†æ
- ç³»ç»Ÿå¯é æ€§åˆ†æ
- ç”¨æˆ·æ»¡æ„åº¦è¯„ä¼°
        """,
        
        "åŸå¸‚æ’æ°´ç³»ç»Ÿ.txt": """
ä»¿çœŸåç§°ï¼šåŸå¸‚æ™ºèƒ½æ’æ°´é˜²æ¶ç³»ç»Ÿ
ä»¿çœŸæè¿°ï¼šæ¨¡æ‹ŸåŸå¸‚åœ¨æš´é›¨æ¡ä»¶ä¸‹çš„æ’æ°´é˜²æ¶è¿‡ç¨‹
ä»¿çœŸæ—¶é•¿ï¼š21600ç§’ï¼ˆ6å°æ—¶ï¼‰
æ—¶é—´æ­¥é•¿ï¼š30ç§’
æ±‚è§£å™¨ï¼šrk4

ç³»ç»Ÿç»„ä»¶ï¼š
- é›¨æ°´æ”¶é›†ç³»ç»Ÿï¼šåŒ…å«100ä¸ªé›¨æ°´å£ï¼Œæ€»æ”¶é›†é¢ç§¯500å¹³æ–¹å…¬é‡Œ
- æ’æ°´ç®¡ç½‘ï¼šç®¡é“ç½‘ç»œï¼Œæ€»é•¿åº¦1000å…¬é‡Œï¼Œç®¡å¾„èŒƒå›´0.5-3ç±³
- æ³µç«™ç¾¤ï¼šåŒ…å«15ä¸ªæ’æ°´æ³µç«™ï¼Œæ€»æ’æ°´èƒ½åŠ›5000ç«‹æ–¹ç±³æ¯ç§’
- è°ƒè“„è®¾æ–½ï¼šåŒ…å«8ä¸ªè°ƒè“„æ± ï¼Œæ€»å®¹é‡200ä¸‡ç«‹æ–¹ç±³
- é—¸é—¨ç³»ç»Ÿï¼šåŒ…å«50ä¸ªæ™ºèƒ½é—¸é—¨ï¼Œç”¨äºæµé‡è°ƒèŠ‚
- ç›‘æµ‹ç³»ç»Ÿï¼šåŒ…å«200ä¸ªæ°´ä½ä¼ æ„Ÿå™¨å’Œ100ä¸ªæµé‡ä¼ æ„Ÿå™¨

æ§åˆ¶ç­–ç•¥ï¼š
- é‡‡ç”¨å®æ—¶è‡ªé€‚åº”æ§åˆ¶
- åŸºäºé™é›¨é¢„æŠ¥çš„é¢„è§æ€§æ§åˆ¶
- å¤šç›®æ ‡åè°ƒä¼˜åŒ–æ§åˆ¶

æ§åˆ¶ç›®æ ‡ï¼š
- é˜²æ­¢åŸå¸‚å†…æ¶
- å‡å°‘é›¨æ°´æº¢æµ
- ä¼˜åŒ–æ³µç«™è¿è¡Œ
- ä¿æŠ¤æ°´ç¯å¢ƒ

æ™ºèƒ½åŒ–ç‰¹æ€§ï¼š
- é™é›¨é¢„æŠ¥é›†æˆ
- å†…æ¶é£é™©é¢„è­¦
- åº”æ€¥å“åº”è‡ªåŠ¨åŒ–
- è¿è¡ŒçŠ¶æ€å®æ—¶ç›‘æ§

åˆ†æè¦æ±‚ï¼š
- é˜²æ¶æ•ˆæœè¯„ä¼°
- ç³»ç»Ÿè¿è¡Œæ•ˆç‡åˆ†æ
- ç¯å¢ƒå½±å“è¯„ä»·
- åº”æ€¥å“åº”èƒ½åŠ›è¯„ä¼°
- ç”Ÿæˆå®æ—¶é¢„è­¦å’Œè°ƒåº¦å»ºè®®
        """
    }
    
    # ä¿å­˜ç¤ºä¾‹æ–‡ä»¶
    for filename, content in samples.items():
        file_path = output_dir / filename
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(content.strip())
        print(f"å·²åˆ›å»ºç¤ºä¾‹æè¿°æ–‡ä»¶: {file_path}")
    
    print(f"\næ‰€æœ‰ç¤ºä¾‹æè¿°æ–‡ä»¶å·²ä¿å­˜åˆ°: {output_dir}")
    return output_dir

def test_sample_descriptions(sample_dir):
    """æµ‹è¯•ç¤ºä¾‹æè¿°æ–‡ä»¶çš„è½¬æ¢"""
    print("\n" + "=" * 60)
    print("æµ‹è¯•ç¤ºä¾‹æè¿°æ–‡ä»¶è½¬æ¢")
    print("=" * 60)
    
    converter = LanguageToConfigConverter()
    
    # è·å–æ‰€æœ‰ç¤ºä¾‹æ–‡ä»¶
    sample_files = list(Path(sample_dir).glob("*.txt"))
    
    for sample_file in sample_files:
        print(f"\nå¤„ç†æ–‡ä»¶: {sample_file.name}")
        print("-" * 40)
        
        try:
            # è¯»å–æè¿°æ–‡ä»¶
            with open(sample_file, 'r', encoding='utf-8') as f:
                description = f.read()
            
            # è½¬æ¢ä¸ºä¸åŒç±»å‹çš„é…ç½®æ–‡ä»¶
            base_name = sample_file.stem
            
            # ç»Ÿä¸€é…ç½®æ–‡ä»¶
            unified_dir = f"examples/converted/{base_name}_unified"
            converter.convert_language_to_config(
                description, ConfigType.UNIFIED_SINGLE, unified_dir
            )
            print(f"  ç»Ÿä¸€é…ç½®å·²ç”Ÿæˆ: {unified_dir}")
            
            # é€šç”¨é…ç½®æ–‡ä»¶
            universal_dir = f"examples/converted/{base_name}_universal"
            converter.convert_language_to_config(
                description, ConfigType.UNIVERSAL_CONFIG, universal_dir
            )
            print(f"  é€šç”¨é…ç½®å·²ç”Ÿæˆ: {universal_dir}")
            
        except Exception as e:
            print(f"  è½¬æ¢å¤±è´¥: {e}")

def main():
    """ä¸»å‡½æ•°"""
    print("CHS-SDK è‡ªç„¶è¯­è¨€å¤„ç†åŠŸèƒ½æ¼”ç¤º")
    print("=" * 60)
    
    # ç¡®ä¿å¿…è¦çš„ç›®å½•å­˜åœ¨
    os.makedirs("examples/converted", exist_ok=True)
    os.makedirs("reports", exist_ok=True)
    
    try:
        # 1. æ¼”ç¤ºé…ç½®æ–‡ä»¶åˆ°è‡ªç„¶è¯­è¨€çš„è½¬æ¢
        demo_config_to_language()
        
        # 2. æ¼”ç¤ºè‡ªç„¶è¯­è¨€åˆ°é…ç½®æ–‡ä»¶çš„è½¬æ¢
        demo_language_to_config()
        
        # 3. æ¼”ç¤ºå¾€è¿”è½¬æ¢
        demo_round_trip_conversion()
        
        # 4. åˆ›å»ºç¤ºä¾‹æè¿°æ–‡ä»¶
        sample_dir = create_sample_descriptions()
        
        # 5. æµ‹è¯•ç¤ºä¾‹æè¿°æ–‡ä»¶
        test_sample_descriptions(sample_dir)
        
        print("\n" + "=" * 60)
        print("æ‰€æœ‰æ¼”ç¤ºå®Œæˆï¼")
        print("ç”Ÿæˆçš„æ–‡ä»¶ä½äº:")
        print("- examples/converted/ (è½¬æ¢åçš„é…ç½®æ–‡ä»¶)")
        print("- reports/ (è‡ªç„¶è¯­è¨€æè¿°æŠ¥å‘Š)")
        print("=" * 60)
        
    except Exception as e:
        print(f"æ¼”ç¤ºè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: {e}")
        import traceback
        traceback.print_exc()

if __name__ == '__main__':
    main()
# -*- coding: utf-8 -*-
"""
ä¸ºexamplesç›®å½•ä¸‹çš„ç¤ºä¾‹ç”Ÿæˆè‡ªç„¶è¯­è¨€æè¿°æŠ¥å‘Š
åŒ…å«å»ºæ¨¡ã€æƒ…æ™¯ã€æŸ¥è¯¢ã€åˆ†æå››ä¸ªç»´åº¦çš„æè¿°
"""

import os
import sys
from pathlib import Path
from datetime import datetime
from typing import Dict, List, Any
import yaml
import json

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°è·¯å¾„
sys.path.append(str(Path(__file__).parent.parent))

class ExampleDescriptionGenerator:
    """ç¤ºä¾‹æè¿°ç”Ÿæˆå™¨"""
    
    def __init__(self, examples_dir: str = None):
        self.examples_dir = Path(examples_dir) if examples_dir else Path(__file__).parent
        self.output_dir = Path(__file__).parent.parent / "reports"
        self.output_dir.mkdir(exist_ok=True)
        
        # ç¤ºä¾‹åˆ†ç±»å®šä¹‰
        self.example_categories = {
            "agent_based": {
                "name": "æ™ºèƒ½ä½“åˆ†å¸ƒå¼æ§åˆ¶ç³»ç»Ÿ",
                "description": "åŸºäºå¤šæ™ºèƒ½ä½“æ¶æ„çš„åˆ†å¸ƒå¼æ°´åˆ©æ§åˆ¶ç³»ç»Ÿç¤ºä¾‹",
                "modeling_approach": "å¤šæ™ºèƒ½ä½“å»ºæ¨¡",
                "scenarios": ["åˆ†å±‚æ§åˆ¶", "äº‹ä»¶é©±åŠ¨", "å¤æ‚ç½‘ç»œ", "åº”æ€¥æ¥ç®¡", "æ‰°åŠ¨å¤„ç†"]
            },
            "canal_model": {
                "name": "æ¸ é“ç³»ç»Ÿå»ºæ¨¡ä¸æ§åˆ¶",
                "description": "æ¸ é“æ°´åŠ›å­¦å»ºæ¨¡å’Œæ§åˆ¶ç®—æ³•ç¤ºä¾‹",
                "modeling_approach": "æ°´åŠ›å­¦å»ºæ¨¡",
                "scenarios": ["PIDæ§åˆ¶", "MPCæ§åˆ¶", "æ•…éšœåœºæ™¯", "åˆ†å±‚åˆ†å¸ƒå¼æ§åˆ¶"]
            },
            "mission_example_1": {
                "name": "ä»»åŠ¡åœºæ™¯1ï¼šåŸºç¡€ä»¿çœŸä¸æ§åˆ¶",
                "description": "ä»åŸºç¡€ä»¿çœŸåˆ°é«˜çº§æ§åˆ¶çš„æ¸è¿›å¼ç¤ºä¾‹",
                "modeling_approach": "æ¸è¿›å¼å»ºæ¨¡",
                "scenarios": ["åŸºç¡€ä»¿çœŸ", "é«˜çº§æ§åˆ¶", "å®¹é”™æ§åˆ¶", "æ•°å­—å­ªç”Ÿ", "ä¸­å¤®MPCè°ƒåº¦"]
            },
            "mission_example_2": {
                "name": "ä»»åŠ¡åœºæ™¯2ï¼šæµåŸŸåè°ƒæ§åˆ¶",
                "description": "æµåŸŸçº§åˆ«çš„åè°ƒæ§åˆ¶ç¤ºä¾‹",
                "modeling_approach": "æµåŸŸå»ºæ¨¡",
                "scenarios": ["æœ¬åœ°æ§åˆ¶", "åˆ†å±‚æ§åˆ¶", "æµåŸŸåè°ƒ"]
            },
            "distributed_digital_twin_simulation": {
                "name": "åˆ†å¸ƒå¼æ•°å­—å­ªç”Ÿä»¿çœŸ",
                "description": "åˆ†å¸ƒå¼æ•°å­—å­ªç”Ÿç³»ç»Ÿçš„æ‰°åŠ¨åˆ†æå’Œæ§åˆ¶éªŒè¯",
                "modeling_approach": "æ•°å­—å­ªç”Ÿå»ºæ¨¡",
                "scenarios": ["æ‰°åŠ¨åˆ†æ", "å‚æ•°è¾¨è¯†", "æ§åˆ¶éªŒè¯", "æ€§èƒ½ä¼˜åŒ–"]
            },
            "identification": {
                "name": "å‚æ•°è¾¨è¯†ç¤ºä¾‹",
                "description": "æ°´åˆ©ç³»ç»Ÿå…³é”®å‚æ•°çš„è¾¨è¯†æ–¹æ³•ç¤ºä¾‹",
                "modeling_approach": "å‚æ•°è¾¨è¯†å»ºæ¨¡",
                "scenarios": ["æ°´åº“åº“å®¹æ›²çº¿", "é—¸é—¨æµé‡ç³»æ•°", "ç®¡é“ç³™ç‡"]
            }
        }
    
    def generate_category_description(self, category_key: str, category_info: Dict[str, Any]) -> Dict[str, str]:
        """ä¸ºå•ä¸ªç¤ºä¾‹ç±»åˆ«ç”Ÿæˆæè¿°"""
        
        # å»ºæ¨¡ç»´åº¦æè¿°
        modeling_description = self._generate_modeling_description(category_key, category_info)
        
        # æƒ…æ™¯ç»´åº¦æè¿°
        scenario_description = self._generate_scenario_description(category_key, category_info)
        
        # æŸ¥è¯¢ç»´åº¦æè¿°
        query_description = self._generate_query_description(category_key, category_info)
        
        # åˆ†æç»´åº¦æè¿°
        analysis_description = self._generate_analysis_description(category_key, category_info)
        
        return {
            "modeling": modeling_description,
            "scenario": scenario_description,
            "query": query_description,
            "analysis": analysis_description
        }
    
    def _generate_modeling_description(self, category_key: str, category_info: Dict[str, Any]) -> str:
        """ç”Ÿæˆå»ºæ¨¡ç»´åº¦æè¿°"""
        modeling_templates = {
            "agent_based": """
### å»ºæ¨¡æ–¹æ³•

**å¤šæ™ºèƒ½ä½“åˆ†å¸ƒå¼å»ºæ¨¡**

æœ¬ç¤ºä¾‹é‡‡ç”¨å¤šæ™ºèƒ½ä½“æ¶æ„å¯¹æ°´åˆ©ç³»ç»Ÿè¿›è¡Œå»ºæ¨¡ï¼Œå°†å¤æ‚çš„æ°´åˆ©æ§åˆ¶ç³»ç»Ÿåˆ†è§£ä¸ºå¤šä¸ªè‡ªä¸»æ™ºèƒ½ä½“ï¼š

1. **ç‰©ç†æ™ºèƒ½ä½“**ï¼šè´Ÿè´£æ°´åˆ©è®¾æ–½çš„ç‰©ç†å»ºæ¨¡ï¼ŒåŒ…æ‹¬æ°´åº“ã€é—¸é—¨ã€æ¸ é“ç­‰æ°´å·¥å»ºç­‘ç‰©çš„æ°´åŠ›å­¦è¡Œä¸º
2. **æ§åˆ¶æ™ºèƒ½ä½“**ï¼šå®ç°å„ç§æ§åˆ¶ç®—æ³•ï¼Œå¦‚PIDæ§åˆ¶ã€MPCæ§åˆ¶ç­‰
3. **ç›‘æ§æ™ºèƒ½ä½“**ï¼šè´Ÿè´£ç³»ç»ŸçŠ¶æ€ç›‘æµ‹å’Œæ•°æ®é‡‡é›†
4. **åè°ƒæ™ºèƒ½ä½“**ï¼šå®ç°å¤šä¸ªæ§åˆ¶å•å…ƒä¹‹é—´çš„åè°ƒå’Œè°ƒåº¦

**å»ºæ¨¡ç‰¹ç‚¹**ï¼š
- åˆ†å¸ƒå¼æ¶æ„ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“å…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›
- åŸºäºæ¶ˆæ¯ä¼ é€’çš„é€šä¿¡æœºåˆ¶
- æ”¯æŒåŠ¨æ€é‡æ„å’Œæ•…éšœæ¢å¤
- å¯æ‰©å±•çš„å±‚æ¬¡åŒ–ç»“æ„
""",
            "canal_model": """
### å»ºæ¨¡æ–¹æ³•

**æ¸ é“æ°´åŠ›å­¦å»ºæ¨¡**

æœ¬ç¤ºä¾‹åŸºäºä¸€ç»´æ°´åŠ›å­¦æ–¹ç¨‹å¯¹æ¸ é“ç³»ç»Ÿè¿›è¡Œå»ºæ¨¡ï¼š

1. **è¿ç»­æ€§æ–¹ç¨‹**ï¼šæè¿°æ°´é‡å®ˆæ’
2. **åŠ¨é‡æ–¹ç¨‹**ï¼šæè¿°æ°´æµè¿åŠ¨è§„å¾‹
3. **è¾¹ç•Œæ¡ä»¶**ï¼šå®šä¹‰ä¸Šä¸‹æ¸¸è¾¹ç•Œ
4. **åˆå§‹æ¡ä»¶**ï¼šè®¾å®šç³»ç»Ÿåˆå§‹çŠ¶æ€

**å»ºæ¨¡ç‰¹ç‚¹**ï¼š
- åŸºäºç‰©ç†åŸç†çš„ç²¾ç¡®å»ºæ¨¡
- è€ƒè™‘æ¸ é“å‡ ä½•ç‰¹æ€§å’Œç³™ç‡
- æ”¯æŒéæ’å®šæµè®¡ç®—
- é€‚ç”¨äºå¤æ‚æ¸ ç³»å»ºæ¨¡
""",
            "mission_example_1": """
### å»ºæ¨¡æ–¹æ³•

**æ¸è¿›å¼ç³»ç»Ÿå»ºæ¨¡**

æœ¬ç¤ºä¾‹é‡‡ç”¨ä»ç®€å•åˆ°å¤æ‚çš„æ¸è¿›å¼å»ºæ¨¡æ–¹æ³•ï¼š

1. **åŸºç¡€ç‰©ç†å»ºæ¨¡**ï¼šå»ºç«‹æ°´åˆ©è®¾æ–½çš„åŸºæœ¬ç‰©ç†æ¨¡å‹
2. **æ§åˆ¶ç³»ç»Ÿå»ºæ¨¡**ï¼šæ·»åŠ æ§åˆ¶ç®—æ³•å’Œåé¦ˆæœºåˆ¶
3. **æ•…éšœå»ºæ¨¡**ï¼šå¼•å…¥æ•…éšœåœºæ™¯å’Œå¼‚å¸¸å¤„ç†
4. **æ•°å­—å­ªç”Ÿå»ºæ¨¡**ï¼šæ„å»ºé«˜ä¿çœŸæ•°å­—å­ªç”Ÿç³»ç»Ÿ
5. **ä¼˜åŒ–è°ƒåº¦å»ºæ¨¡**ï¼šå®ç°ç³»ç»Ÿçº§ä¼˜åŒ–è°ƒåº¦

**å»ºæ¨¡ç‰¹ç‚¹**ï¼š
- å¾ªåºæ¸è¿›çš„å¤æ‚åº¦é€’å¢
- æ¨¡å—åŒ–è®¾è®¡ä¾¿äºç†è§£
- æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„å­¦ä¹ ç›®æ ‡
- æ”¯æŒä¸åŒå±‚æ¬¡çš„åº”ç”¨éœ€æ±‚
""",
            "mission_example_2": """
### å»ºæ¨¡æ–¹æ³•

**æµåŸŸçº§åè°ƒå»ºæ¨¡**

æœ¬ç¤ºä¾‹é’ˆå¯¹æµåŸŸçº§æ°´åˆ©ç³»ç»Ÿè¿›è¡Œåè°ƒæ§åˆ¶å»ºæ¨¡ï¼š

1. **æµåŸŸæ‹“æ‰‘å»ºæ¨¡**ï¼šå»ºç«‹æµåŸŸå†…å„æ°´åˆ©è®¾æ–½çš„è¿æ¥å…³ç³»
2. **å¤šå°ºåº¦å»ºæ¨¡**ï¼šç»“åˆå±€éƒ¨è¯¦ç»†æ¨¡å‹å’Œå…¨å±€ç®€åŒ–æ¨¡å‹
3. **åè°ƒæœºåˆ¶å»ºæ¨¡**ï¼šè®¾è®¡å¤šçº§åè°ƒæ§åˆ¶æ¶æ„
4. **çº¦æŸå»ºæ¨¡**ï¼šè€ƒè™‘æ°´èµ„æºåˆ†é…å’Œç¯å¢ƒçº¦æŸ

**å»ºæ¨¡ç‰¹ç‚¹**ï¼š
- å¤§å°ºåº¦ç³»ç»Ÿå»ºæ¨¡
- å¤šç›®æ ‡ä¼˜åŒ–è€ƒè™‘
- åˆ†å±‚åˆ†å¸ƒå¼æ¶æ„
- å®æ—¶åè°ƒå†³ç­–
""",
            "distributed_digital_twin_simulation": """
### å»ºæ¨¡æ–¹æ³•

**åˆ†å¸ƒå¼æ•°å­—å­ªç”Ÿå»ºæ¨¡**

æœ¬ç¤ºä¾‹æ„å»ºåˆ†å¸ƒå¼æ•°å­—å­ªç”Ÿç³»ç»Ÿï¼š

1. **ç‰©ç†ç³»ç»Ÿå»ºæ¨¡**ï¼šé«˜ä¿çœŸç‰©ç†æ¨¡å‹
2. **æ•°å­—å­ªç”Ÿå»ºæ¨¡**ï¼šå®æ—¶åŒæ­¥çš„æ•°å­—å‰¯æœ¬
3. **æ‰°åŠ¨å»ºæ¨¡**ï¼šå„ç§æ‰°åŠ¨å’Œä¸ç¡®å®šæ€§å»ºæ¨¡
4. **é¢„æµ‹å»ºæ¨¡**ï¼šåŸºäºæ•°æ®é©±åŠ¨çš„é¢„æµ‹æ¨¡å‹

**å»ºæ¨¡ç‰¹ç‚¹**ï¼š
- ç‰©ç†-æ•°å­—åŒå‘æ˜ å°„
- å®æ—¶çŠ¶æ€åŒæ­¥
- æ‰°åŠ¨æ„ŸçŸ¥å’Œé€‚åº”
- é¢„æµ‹æ€§ç»´æŠ¤æ”¯æŒ
""",
            "identification": """
### å»ºæ¨¡æ–¹æ³•

**å‚æ•°è¾¨è¯†å»ºæ¨¡**

æœ¬ç¤ºä¾‹ä¸“æ³¨äºæ°´åˆ©ç³»ç»Ÿå…³é”®å‚æ•°çš„è¾¨è¯†ï¼š

1. **å‚æ•°åŒ–å»ºæ¨¡**ï¼šå»ºç«‹å«å¾…è¾¨è¯†å‚æ•°çš„æ•°å­¦æ¨¡å‹
2. **è§‚æµ‹å»ºæ¨¡**ï¼šè®¾è®¡è§‚æµ‹æ–¹ç¨‹å’Œæµ‹é‡æ¨¡å‹
3. **è¾¨è¯†ç®—æ³•å»ºæ¨¡**ï¼šå®ç°å„ç§å‚æ•°è¾¨è¯†ç®—æ³•
4. **éªŒè¯å»ºæ¨¡**ï¼šå»ºç«‹å‚æ•°éªŒè¯å’Œè¯„ä¼°æœºåˆ¶

**å»ºæ¨¡ç‰¹ç‚¹**ï¼š
- åŸºäºè§‚æµ‹æ•°æ®çš„å‚æ•°ä¼°è®¡
- å¤šç§è¾¨è¯†ç®—æ³•æ”¯æŒ
- å‚æ•°ä¸ç¡®å®šæ€§é‡åŒ–
- åœ¨çº¿è¾¨è¯†èƒ½åŠ›
"""
        }
        
        return modeling_templates.get(category_key, f"### å»ºæ¨¡æ–¹æ³•\n\n{category_info['modeling_approach']}å»ºæ¨¡æ–¹æ³•çš„è¯¦ç»†æè¿°ã€‚")
    
    def _generate_scenario_description(self, category_key: str, category_info: Dict[str, Any]) -> str:
        """ç”Ÿæˆæƒ…æ™¯ç»´åº¦æè¿°"""
        scenarios = category_info.get('scenarios', [])
        
        scenario_desc = f"### ä»¿çœŸæƒ…æ™¯\n\n**{category_info['name']}**åŒ…å«ä»¥ä¸‹ä¸»è¦ä»¿çœŸæƒ…æ™¯ï¼š\n\n"
        
        for i, scenario in enumerate(scenarios, 1):
            scenario_desc += f"{i}. **{scenario}**ï¼šé’ˆå¯¹{scenario}çš„ä¸“é—¨ä»¿çœŸåœºæ™¯\n"
        
        scenario_desc += "\næ¯ä¸ªæƒ…æ™¯éƒ½è®¾è®¡äº†ç‰¹å®šçš„åˆå§‹æ¡ä»¶ã€è¾¹ç•Œæ¡ä»¶å’Œæ‰°åŠ¨è¾“å…¥ï¼Œä»¥éªŒè¯ç³»ç»Ÿåœ¨ä¸åŒå·¥å†µä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚"
        
        return scenario_desc
    
    def _generate_query_description(self, category_key: str, category_info: Dict[str, Any]) -> str:
        """ç”ŸæˆæŸ¥è¯¢ç»´åº¦æè¿°"""
        query_templates = {
            "agent_based": """
### å…¸å‹æŸ¥è¯¢é—®é¢˜

1. **ç³»ç»Ÿæ€§èƒ½æŸ¥è¯¢**
   - å„æ™ºèƒ½ä½“çš„å“åº”æ—¶é—´å¦‚ä½•ï¼Ÿ
   - ç³»ç»Ÿçš„åè°ƒæ•ˆç‡å¦‚ä½•è¯„ä¼°ï¼Ÿ
   - åœ¨æ•…éšœæƒ…å†µä¸‹ç³»ç»Ÿå¦‚ä½•é‡æ„ï¼Ÿ

2. **æ§åˆ¶æ•ˆæœæŸ¥è¯¢**
   - PIDæ§åˆ¶ä¸MPCæ§åˆ¶çš„æ€§èƒ½å¯¹æ¯”ï¼Ÿ
   - åˆ†å¸ƒå¼æ§åˆ¶ç›¸æ¯”é›†ä¸­å¼æ§åˆ¶çš„ä¼˜åŠ¿ï¼Ÿ
   - ç³»ç»Ÿçš„é²æ£’æ€§å¦‚ä½•ï¼Ÿ

3. **æ‰©å±•æ€§æŸ¥è¯¢**
   - å¦‚ä½•æ·»åŠ æ–°çš„æ™ºèƒ½ä½“ï¼Ÿ
   - ç³»ç»Ÿæ”¯æŒçš„æœ€å¤§è§„æ¨¡æ˜¯å¤šå°‘ï¼Ÿ
   - é€šä¿¡å»¶è¿Ÿå¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Ÿ
""",
            "canal_model": """
### å…¸å‹æŸ¥è¯¢é—®é¢˜

1. **æ°´åŠ›å­¦æ€§èƒ½æŸ¥è¯¢**
   - æ¸ é“çš„æ°´ä½å˜åŒ–è§„å¾‹ï¼Ÿ
   - æµé‡è°ƒèŠ‚çš„å“åº”ç‰¹æ€§ï¼Ÿ
   - ä¸åŒæ§åˆ¶ç­–ç•¥çš„æ•ˆæœå¯¹æ¯”ï¼Ÿ

2. **æ§åˆ¶ç³»ç»ŸæŸ¥è¯¢**
   - PIDå‚æ•°å¦‚ä½•ä¼˜åŒ–ï¼Ÿ
   - MPCæ§åˆ¶çš„é¢„æµ‹ç²¾åº¦ï¼Ÿ
   - æ§åˆ¶ç³»ç»Ÿçš„ç¨³å®šæ€§åˆ†æï¼Ÿ

3. **æ•…éšœå¤„ç†æŸ¥è¯¢**
   - ä¼ æ„Ÿå™¨æ•…éšœå¦‚ä½•æ£€æµ‹ï¼Ÿ
   - æ‰§è¡Œå™¨æ•…éšœçš„åº”å¯¹ç­–ç•¥ï¼Ÿ
   - ç³»ç»Ÿçš„å®¹é”™èƒ½åŠ›è¯„ä¼°ï¼Ÿ
"""
        }
        
        return query_templates.get(category_key, """
### å…¸å‹æŸ¥è¯¢é—®é¢˜

1. **ç³»ç»Ÿæ€§èƒ½æŸ¥è¯¢**ï¼šå…³äºç³»ç»Ÿè¿è¡Œæ€§èƒ½çš„å„ç§é—®é¢˜
2. **æ§åˆ¶æ•ˆæœæŸ¥è¯¢**ï¼šå…³äºæ§åˆ¶ç®—æ³•æ•ˆæœçš„åˆ†æé—®é¢˜
3. **å‚æ•°ä¼˜åŒ–æŸ¥è¯¢**ï¼šå…³äºå‚æ•°è°ƒä¼˜å’Œç³»ç»Ÿä¼˜åŒ–çš„é—®é¢˜
""")
    
    def _generate_analysis_description(self, category_key: str, category_info: Dict[str, Any]) -> str:
        """ç”Ÿæˆåˆ†æç»´åº¦æè¿°"""
        analysis_templates = {
            "agent_based": """
### åˆ†ææ–¹æ³•ä¸ç»“æœ

**æ€§èƒ½åˆ†æ**
- å“åº”æ—¶é—´åˆ†æï¼šç»Ÿè®¡å„æ™ºèƒ½ä½“çš„å¹³å‡å“åº”æ—¶é—´å’Œæœ€å¤§å“åº”æ—¶é—´
- é€šä¿¡æ•ˆç‡åˆ†æï¼šåˆ†ææ¶ˆæ¯ä¼ é€’çš„å»¶è¿Ÿå’ŒæˆåŠŸç‡
- èµ„æºåˆ©ç”¨ç‡åˆ†æï¼šè¯„ä¼°è®¡ç®—èµ„æºå’Œç½‘ç»œèµ„æºçš„ä½¿ç”¨æƒ…å†µ

**æ§åˆ¶æ•ˆæœåˆ†æ**
- æ§åˆ¶ç²¾åº¦åˆ†æï¼šè®¡ç®—æ§åˆ¶è¯¯å·®çš„å‡å€¼ã€æ–¹å·®å’Œæœ€å¤§å€¼
- ç¨³å®šæ€§åˆ†æï¼šè¯„ä¼°ç³»ç»Ÿçš„ç¨³å®šè£•åº¦å’Œé²æ£’æ€§
- åè°ƒæ•ˆæœåˆ†æï¼šåˆ†æå¤šæ™ºèƒ½ä½“åè°ƒçš„ä¸€è‡´æ€§å’Œæ•ˆç‡

**æ•…éšœæ¢å¤åˆ†æ**
- æ•…éšœæ£€æµ‹æ—¶é—´ï¼šç»Ÿè®¡æ•…éšœæ£€æµ‹çš„å¹³å‡æ—¶é—´
- æ¢å¤æ—¶é—´åˆ†æï¼šåˆ†æç³»ç»Ÿä»æ•…éšœä¸­æ¢å¤çš„æ—¶é—´
- é™çº§è¿è¡Œåˆ†æï¼šè¯„ä¼°ç³»ç»Ÿåœ¨éƒ¨åˆ†æ•…éšœä¸‹çš„è¿è¡Œèƒ½åŠ›
""",
            "canal_model": """
### åˆ†ææ–¹æ³•ä¸ç»“æœ

**æ°´åŠ›å­¦åˆ†æ**
- æ°´ä½æ³¢åŠ¨åˆ†æï¼šåˆ†ææ°´ä½å˜åŒ–çš„å¹…åº¦å’Œé¢‘ç‡ç‰¹æ€§
- æµé‡è°ƒèŠ‚åˆ†æï¼šè¯„ä¼°æµé‡æ§åˆ¶çš„ç²¾åº¦å’Œå“åº”é€Ÿåº¦
- æ°´åŠ›å­¦ç¨³å®šæ€§ï¼šåˆ†ææ¸ é“ç³»ç»Ÿçš„æ°´åŠ›å­¦ç¨³å®šæ¡ä»¶

**æ§åˆ¶æ€§èƒ½åˆ†æ**
- PIDæ§åˆ¶åˆ†æï¼šåˆ†æPIDæ§åˆ¶å™¨çš„è°ƒèŠ‚æ—¶é—´ã€è¶…è°ƒé‡å’Œç¨³æ€è¯¯å·®
- MPCæ§åˆ¶åˆ†æï¼šè¯„ä¼°æ¨¡å‹é¢„æµ‹æ§åˆ¶çš„é¢„æµ‹ç²¾åº¦å’Œä¼˜åŒ–æ•ˆæœ
- æ§åˆ¶ç­–ç•¥å¯¹æ¯”ï¼šæ¯”è¾ƒä¸åŒæ§åˆ¶ç­–ç•¥çš„ä¼˜ç¼ºç‚¹

**é²æ£’æ€§åˆ†æ**
- å‚æ•°æ•æ„Ÿæ€§åˆ†æï¼šåˆ†æç³»ç»Ÿå¯¹å‚æ•°å˜åŒ–çš„æ•æ„Ÿç¨‹åº¦
- æ‰°åŠ¨æŠ‘åˆ¶åˆ†æï¼šè¯„ä¼°ç³»ç»Ÿå¯¹å¤–éƒ¨æ‰°åŠ¨çš„æŠ‘åˆ¶èƒ½åŠ›
- æ¨¡å‹ä¸ç¡®å®šæ€§åˆ†æï¼šåˆ†ææ¨¡å‹è¯¯å·®å¯¹æ§åˆ¶æ•ˆæœçš„å½±å“
"""
        }
        
        return analysis_templates.get(category_key, """
### åˆ†ææ–¹æ³•ä¸ç»“æœ

**æ€§èƒ½æŒ‡æ ‡åˆ†æ**ï¼šå¯¹ç³»ç»Ÿå…³é”®æ€§èƒ½æŒ‡æ ‡è¿›è¡Œå®šé‡åˆ†æ
**å¯¹æ¯”åˆ†æ**ï¼šä¸åŒæ–¹æ³•æˆ–ç­–ç•¥ä¹‹é—´çš„å¯¹æ¯”è¯„ä¼°
**æ•æ„Ÿæ€§åˆ†æ**ï¼šå‚æ•°å˜åŒ–å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“åˆ†æ
**ä¼˜åŒ–å»ºè®®**ï¼šåŸºäºåˆ†æç»“æœæå‡ºçš„æ”¹è¿›å»ºè®®
""")
    
    def generate_comprehensive_report(self) -> str:
        """ç”Ÿæˆç»¼åˆæŠ¥å‘Š"""
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        
        report_content = f"""
# CHS-SDK ç¤ºä¾‹ç³»ç»Ÿè‡ªç„¶è¯­è¨€æè¿°æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: {timestamp}  
**ç‰ˆæœ¬**: 1.0  
**ä½œè€…**: CHS-SDK è‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿ  

## æ¦‚è¿°

æœ¬æŠ¥å‘Šä¸ºCHS-SDKæ°´åˆ©ç³»ç»Ÿä»¿çœŸå¹³å°çš„ç¤ºä¾‹ç³»ç»Ÿæä¾›è¯¦ç»†çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œæ¶µç›–å»ºæ¨¡æ–¹æ³•ã€ä»¿çœŸæƒ…æ™¯ã€å…¸å‹æŸ¥è¯¢å’Œåˆ†æç»“æœå››ä¸ªç»´åº¦ã€‚è¿™äº›ç¤ºä¾‹å±•ç¤ºäº†å¹³å°åœ¨ä¸åŒåº”ç”¨åœºæ™¯ä¸‹çš„èƒ½åŠ›å’Œç‰¹ç‚¹ã€‚

## ç¤ºä¾‹åˆ†ç±»æ¦‚è§ˆ

"""
        
        # ç”Ÿæˆæ¯ä¸ªç±»åˆ«çš„æè¿°
        for category_key, category_info in self.example_categories.items():
            if self._check_category_exists(category_key):
                report_content += f"\n## {category_info['name']}\n\n"
                report_content += f"**æè¿°**: {category_info['description']}\n\n"
                
                descriptions = self.generate_category_description(category_key, category_info)
                
                for dimension, content in descriptions.items():
                    report_content += content + "\n\n"
                
                report_content += "---\n\n"
        
        # æ·»åŠ æ€»ç»“
        report_content += """
## æ€»ç»“

é€šè¿‡ä»¥ä¸Šç¤ºä¾‹çš„è¯¦ç»†æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°CHS-SDKå¹³å°å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **å¤šæ ·åŒ–çš„å»ºæ¨¡æ–¹æ³•**ï¼šæ”¯æŒä»ç®€å•çš„ç‰©ç†å»ºæ¨¡åˆ°å¤æ‚çš„å¤šæ™ºèƒ½ä½“å»ºæ¨¡
2. **ä¸°å¯Œçš„ä»¿çœŸæƒ…æ™¯**ï¼šæ¶µç›–æ­£å¸¸è¿è¡Œã€æ•…éšœå¤„ç†ã€ä¼˜åŒ–è°ƒåº¦ç­‰å¤šç§åœºæ™¯
3. **çµæ´»çš„æŸ¥è¯¢æœºåˆ¶**ï¼šæ”¯æŒå„ç§æ€§èƒ½åˆ†æå’Œç³»ç»Ÿè¯„ä¼°æŸ¥è¯¢
4. **å…¨é¢çš„åˆ†æèƒ½åŠ›**ï¼šæä¾›å®šé‡åˆ†æã€å¯¹æ¯”è¯„ä¼°å’Œä¼˜åŒ–å»ºè®®

è¿™äº›ç¤ºä¾‹ä¸ºç”¨æˆ·å­¦ä¹ å’Œåº”ç”¨CHS-SDKå¹³å°æä¾›äº†å®Œæ•´çš„å‚è€ƒå’ŒæŒ‡å¯¼ã€‚

---

*æœ¬æŠ¥å‘Šç”±CHS-SDKè‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿåˆ›å»º*
"""
        
        return report_content
    
    def _check_category_exists(self, category_key: str) -> bool:
        """æ£€æŸ¥ç¤ºä¾‹ç±»åˆ«æ˜¯å¦å­˜åœ¨"""
        category_path = self.examples_dir / category_key
        return category_path.exists() and category_path.is_dir()
    
    def save_report(self, content: str, filename: str = None) -> str:
        """ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶"""
        if filename is None:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = f"examples_natural_language_descriptions_{timestamp}.md"
        
        report_path = self.output_dir / filename
        
        with open(report_path, 'w', encoding='utf-8') as f:
            f.write(content)
        
        return str(report_path)
    
    def run(self):
        """è¿è¡Œæè¿°ç”Ÿæˆå™¨"""
        print("ğŸš€ å¼€å§‹ç”Ÿæˆç¤ºä¾‹è‡ªç„¶è¯­è¨€æè¿°æŠ¥å‘Š...")
        
        # ç”Ÿæˆç»¼åˆæŠ¥å‘Š
        report_content = self.generate_comprehensive_report()
        
        # ä¿å­˜æŠ¥å‘Š
        report_path = self.save_report(report_content)
        
        print(f"âœ… æŠ¥å‘Šç”Ÿæˆå®Œæˆ: {report_path}")
        print(f"ğŸ“Š åŒ…å«ç¤ºä¾‹ç±»åˆ«æ•°: {len([k for k in self.example_categories.keys() if self._check_category_exists(k)])}")
        
        return report_path

if __name__ == "__main__":
    generator = ExampleDescriptionGenerator()
    report_path = generator.run()
    print(f"\nğŸ“ æŠ¥å‘Šæ–‡ä»¶: {report_path}")