# Mission Example 3 - 增强感知智能体仿真

## 概述

这个示例展示了增强感知智能体在水库系统中的应用。智能体具备增强的感知能力，能够处理传感器故障、数据异常等复杂情况，并做出智能决策。

## 仿真特性

- **水库物理组件仿真**: 模拟真实的水库系统动态
- **增强感知智能体**: 具备故障检测和数据修复能力
- **传感器故障注入**: 在第5步注入传感器故障，测试智能体的鲁棒性
- **多种运行方式**: 支持4种不同的运行和配置方式
- **可视化输出**: 生成仿真结果图表和分析报告

## 目录结构

```
example_3/
├── 01_enhanced_perception/          # 传统配置文件目录
│   ├── agents.yml                   # 智能体配置
│   ├── components.yml               # 物理组件配置
│   ├── config.yml                   # 仿真参数配置
│   └── universal_config.yml         # 子目录通用配置
├── config_3.yml                     # 原始配置文件
├── universal_config_3.yml           # 主目录通用配置文件
├── run_config_3.py                  # 原始运行脚本
├── run_hardcoded.py                 # 硬编码运行脚本
├── run_scenario.py                  # 场景运行脚本
├── run_unified_scenario.py          # 统一场景运行脚本
├── run_universal_config.py          # 通用配置运行脚本
└── README.md                        # 本文档
```

## 四种运行方式

### 1. 硬编码方式 (run_hardcoded.py)

**特点**: 所有配置直接在Python代码中定义，不依赖外部配置文件。

**适用场景**: 
- 快速原型开发
- 调试和测试
- 学习和理解系统架构

**运行方法**:
```bash
python run_hardcoded.py
```

**优点**:
- 配置直观，易于理解
- 无需外部文件依赖
- 便于快速修改和测试

**缺点**:
- 配置不够灵活
- 修改需要重新编译
- 不适合生产环境

### 2. 场景方式 (run_scenario.py)

**特点**: 使用传统的多配置文件方式，包括agents.yml、components.yml、config.yml等。

**适用场景**:
- 标准的仿真场景
- 配置文件分离管理
- 团队协作开发

**运行方法**:
```bash
python run_scenario.py
```

**配置文件**:
- `01_enhanced_perception/agents.yml`: 智能体配置
- `01_enhanced_perception/components.yml`: 物理组件配置
- `01_enhanced_perception/config.yml`: 仿真参数配置

**优点**:
- 配置文件分离，职责清晰
- 易于维护和管理
- 支持模块化配置

**缺点**:
- 需要管理多个配置文件
- 配置分散，可能导致不一致

### 3. 统一场景方式 (run_unified_scenario.py)

**特点**: 使用统一的配置文件格式，将所有配置整合到一个文件中。

**适用场景**:
- 简化的配置管理
- 单一配置文件部署
- 配置一致性要求高的场景

**运行方法**:
```bash
python run_unified_scenario.py
```

**配置文件**:
- `universal_config_3.yml` 或 `01_enhanced_perception/universal_config.yml`

**优点**:
- 单一配置文件，管理简单
- 配置一致性好
- 部署方便

**缺点**:
- 大型项目中配置文件可能过大
- 模块化程度较低

### 4. 通用配置方式 (run_universal_config.py)

**特点**: 使用功能最完整的通用配置文件，包含调试、监控、分析等高级功能。

**适用场景**:
- 生产环境部署
- 需要完整功能的仿真
- 性能监控和分析
- 高级调试和诊断

**运行方法**:
```bash
python run_universal_config.py
```

**配置文件**:
- `universal_config_3.yml`: 包含完整配置选项的通用配置文件

**功能模块**:
- 仿真参数配置
- 调试和性能监控
- 可视化设置
- 数据输出管理
- 智能分析（感知、认知、预测）
- 日志和错误处理
- 缓存和网络配置
- 安全和扩展设置

**优点**:
- 功能最完整
- 支持高级特性
- 适合生产环境
- 提供详细的监控和分析

**缺点**:
- 配置复杂
- 学习成本较高
- 资源消耗较大

## 仿真参数说明

### 基本参数
- **仿真时长**: 20步
- **时间步长**: 1.0秒
- **消息主题**: `perception/reservoir/state`

### 物理组件
- **水库组件**: 
  - 初始深度: 10.0米
  - 初始入流: 100.0立方米/秒
  - 模型类型: ReservoirModel

### 故障注入
- **传感器故障**: 在第5步注入传感器故障
- **故障类型**: 传感器数据异常
- **测试目标**: 验证智能体的故障检测和恢复能力

## 输出结果

仿真完成后，会在以下位置生成结果文件：

- `output/`: 仿真数据输出
- `logs/`: 日志文件
- `plots/`: 可视化图表
- `analysis/`: 分析报告（通用配置方式）
- `performance/`: 性能报告（通用配置方式）

## 使用建议

1. **初学者**: 建议从硬编码方式开始，理解系统架构
2. **开发者**: 使用场景方式进行日常开发和测试
3. **部署**: 使用统一场景方式进行简单部署
4. **生产**: 使用通用配置方式获得完整功能

## 故障排除

### 常见问题

1. **导入错误**: 确保在项目根目录下运行脚本
2. **配置文件缺失**: 检查相应的配置文件是否存在
3. **权限问题**: 确保有写入输出目录的权限

### 调试建议

1. 使用硬编码方式快速验证功能
2. 检查日志文件获取详细错误信息
3. 使用通用配置方式的调试功能进行深入分析

## 扩展开发

### 添加新的智能体
1. 修改相应的agents.yml或配置文件
2. 实现智能体类
3. 更新消息主题配置

### 添加新的物理组件
1. 修改components.yml或配置文件
2. 实现组件模型类
3. 更新仿真参数

### 自定义故障注入
1. 修改故障注入配置
2. 实现自定义故障类型
3. 更新智能体的故障处理逻辑

## 相关文档

- [CHS-SDK 用户指南](../../docs/user_guide.md)
- [智能体开发指南](../../docs/agent_development.md)
- [配置文件参考](../../docs/configuration_reference.md)
- [API 文档](../../docs/api_reference.md)